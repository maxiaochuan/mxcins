import { Routes, Route, RouteProps, Outlet } from 'react-router-dom';
import conf from '{{{routesPath}}}';

interface IRoute extends RouteProps {
  key?: string;
  component?: any;
  routes?: IRoute[];
}

const map = (routes: IRoute[]) => {
  return routes.map(row => {
    const { key, path, index, component: Component, routes = [] } = row;
    return (
      <Route key={key} index={index} path={path} element={<Component>{routes.length && <Outlet /> || null}</Component>}>
        {map(routes)}
      </Route>
    );
  });
};

const render = (routes: IRoute[]) => <Routes>{map(routes)}</Routes>

export default render(conf);